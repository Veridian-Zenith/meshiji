name: "CodeRabbit Integration"

on:
  pull_request:
    branches: [ "main", "master", "develop" ]
    types: [ opened, synchronize, reopened ]

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  verify-coderabbit-config:
    runs-on: ubuntu-latest
    name: Verify CodeRabbit Configuration
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Check CodeRabbit configuration
        run: |
          echo "üîç Checking CodeRabbit configuration..."
          if [ -f "coderabbit.yaml" ]; then
            echo "‚úÖ CodeRabbit configuration file found"
            cat coderabbit.yaml
          else
            echo "‚ùå CodeRabbit configuration file not found"
            exit 1
          fi

      - name: Validate YAML syntax
        run: |
          echo "üîß Validating YAML syntax..."
          python3 -c "import yaml; yaml.safe_load(open('coderabbit.yaml'))"
          echo "‚úÖ YAML syntax is valid"

      - name: Info for CodeRabbit Setup
        run: |
          echo "üìù CodeRabbit Free Setup Instructions:"
          echo ""
          echo "1. Go to https://app.coderabbit.ai/"
          echo "2. Sign up or log in with your GitHub account"
          echo "3. Add this repository to your CodeRabbit dashboard"
          echo "4. CodeRabbit will automatically start analyzing your code"
          echo ""
          echo "‚úÖ Repository is ready for CodeRabbit integration!"
